<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>在MAC下使用proxychains为git加速 | Bin&#39;s Blog | Good Lucky.</title>

  
  <meta name="author" content="Bob Liao">
  

  
  <meta name="description" content="一个戳逼的日记本。">
  

  
  
  <meta name="keywords" content="Mac,git,proxychains">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="在MAC下使用proxychains为git加速"/>

  <meta property="og:site_name" content="Bin&#39;s Blog"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Bin&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Bin&#39;s Blog</a>
    </h1>
    <p class="site-description">Good Lucky.</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/links">Links</a></li>
      
        <li><a href="/resume">About</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>在MAC下使用proxychains为git加速</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/06/28/mac-use-proxychains-for-git.html" rel="bookmark">
        <time class="entry-date published" datetime="2017-06-27T16:00:47.000Z">
          2017-06-28
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>Note: 需要先在Mac上安装<code>shadowsocksX-NG</code>，并且配置自己的<code>shadowsocks</code>服务，最好是可以同时配置<code>kcptun</code>服务，这样的话可以得到更快的速度。<br><a id="more"></a><br>首先安装使用<code>brew</code>进行安装<code>proxychains-ng</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install proxychains-ng</div></pre></td></tr></table></figure>
<blockquote>
<p>Note: 其实这个安装只是安装到一个容器里面</p>
</blockquote>
<p>安装完成后需要修改<code>proxychains-ng</code>的配置文件来设置代理端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">vim /usr/<span class="built_in">local</span>/etc/proxychains.conf</div><div class="line"><span class="comment"># 修改最后一行</span></div><div class="line">socks5 127.0.0.1 1086</div><div class="line"><span class="comment"># 协议 监听地址  监听端口</span></div><div class="line"><span class="comment"># 这里可以选用`http`协议或者`socks`协议</span></div></pre></td></tr></table></figure>
<p>如果需要让命令行里面的某个程序在无需任何配置的情况直接走代理，直接在原来的命令前面加<code>proxychains4</code>就可以。(我记的linux下命令好像是<code>proxychains</code>来着,不过没差，反正tab能补全。)</p>
<p>例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">proxychains4 git <span class="built_in">clone</span> xxxx.git</div></pre></td></tr></table></figure></p>
<p>如果想让某个<code>app</code>走代理路线，可以使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">proxychains4 open -a QQ.app</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Note: 当然一些app自带proxy设置的，例如<code>telegram-desktop</code>就可以直接在设置中填写代理地址</p>
</blockquote>
<p>当你这个命令使用的多的时候，你可能会觉得这个单词比较长，达不到你想要的装逼速度，于是这时候你可以使用<code>shell</code>里面的别名功能。<br>以<code>zsh</code>为例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vim ~/.zshrc</div><div class="line"><span class="comment"># 在最后一行增加(当然你想在哪行增加都可以。)</span></div><div class="line"><span class="built_in">alias</span> DL=<span class="string">"proxychains"</span></div></pre></td></tr></table></figure>
<p>这样每次就直接输入两个大写字母就可以快速的进行使用代理了。</p>
<blockquote>
<p>小技巧：如果你先打了<code>DL</code>或者<code>proxychains4</code>这命令以后，你继续写剩余的命令的话，你会发现剩余的命令无法使用补全功能了。所以我一般是使用正常书写其他命里的方式。写完后再按下键盘上的<code>home</code>键，它可以快速的使光标到达命令的最前面，然后再加上<code>DL</code>，这样就比较便捷，Mac下的话使用<code>Iterm2</code> 好像使用设置快捷键也可以自动增加你想要的命令在头部，但是我个人觉得会增加学习成本，因为<code>home</code>键在linux下面也是通用的。</p>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>因为Mac的<code>sip</code>系统保护机制，所以这个需要关闭，实际上我后面想了一下，不关闭好像也可以。有尝试过的朋友可以告诉我一下。</p>
<p>对于使用<code>git</code>命令走代理的时候，经常会出现一个签名验证失败的问题。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[proxychains] DLL init: proxychains-ng 4.11</div><div class="line">  dyld: warning: could not load inserted library <span class="string">'/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'</span> into library validated process because no suitable image found.  Did find:</div><div class="line">  	/usr/<span class="built_in">local</span>/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of <span class="string">'/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'</span></div><div class="line">  dyld: warning: could not load inserted library <span class="string">'/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'</span> into library validated process because no suitable image found.  Did find:</div><div class="line">  	/usr/<span class="built_in">local</span>/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of <span class="string">'/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'</span></div><div class="line">  dyld: warning: could not load inserted library <span class="string">'/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'</span> into library validated process because no suitable image found.  Did find:</div><div class="line">  	/usr/<span class="built_in">local</span>/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of <span class="string">'/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'</span></div></pre></td></tr></table></figure></p>
<p>大概就是这样的一个错误，经过我的总结，我发现就是<code>porxychains</code>本身只是一个容器的应用，是没有权限去访问系统目录的。所以由此解决方法可以想到两个。<br>一个是把你需要使用的命令变成可供普通访问的权限。<br>类似这样：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install git</div></pre></td></tr></table></figure></p>
<p>这里直接用一个<code>「容器版git」</code>来替代系统git命令，重启当前终端就可以正常使用并且不再报错。</p>
<p>第二个方案方法就赋予<code>proxychains</code>权限。<br>由于我感觉这个方法没有第一个方法简单，所以我没多做研究。</p>
<h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><p>如有不正确的地方请各位大佬指出，小弟虚心请教。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Mac/">Mac</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Mac/">Mac</a><a href="/tags/git/">git</a><a href="/tags/proxychains/">proxychains</a>
    </span>
    

    </div>

    
  </div>
</article>

  
	<section id="comments" class="comment">
	  <div id="disqus_thread">
	  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>

	<script type="text/javascript">
	var disqus_shortname = 'bobslogs';
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	</script>





    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 Bob Liao
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>